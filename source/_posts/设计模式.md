



# 概述

## 为什么要学设计模式

1. 软考要考 （bushi）

2. 设计模式来源于众多专家的经验和智慧，使用这些方案可以让我们避免做一些重复性的工作，有助于我们提高开发和设计效率

3. 设计模式跨语言、跨平台、跨应用，方便开发人员交流

4. 学习设计模式将有助于初学者更加深入地理解面向对象思想。



先了解几种面向对象地设计原则 [https:]()



# 简单工厂模式

简单工厂模式并不在23种设计模式的范畴种，但是一个经常用的到，入门必学的模式。

案例：用java开发一套图表库，该图表库可以提供各种不同外观的图表，例如柱状图、饼状图、折线图等。希望能开发出一套灵活的图表库，而且可以扩展，以便之后加入一些新类型的图表



初始化方案：

```java
class Chart {
	private String type; //图表类型
	
	public Chart(Object[][] data, String type) {
		this.type = type;
		if (type.equalsIgnoreCase("histogram")) {
			//初始化柱状图
		}
		else if (type.equalsIgnoreCase("pie")) {
			//初始化饼状图
		}
		else if (type.equalsIgnoreCase("line")) {
			//初始化折线图
		}
	}
 
	public void display() {
		if (this.type.equalsIgnoreCase("histogram")) {
			//显示柱状图
		}
		else if (this.type.equalsIgnoreCase("pie")) {
			//显示饼状图
		}
		else if (this.type.equalsIgnoreCase("line")) {
			//显示折线图
		}	
	}
}
```

这个方案缺点有很多

1. Chart类的职责过重，它不仅要初始化，还要展示图表，这违法了**单一职责原则**，不利于类的重用和维护

2. 当新添加一个图表时，必须得修改Chart类的源代码，违反了**开放封闭原则**

3. 客户端只能通过new来直接创建Chart对象，Chart类于客户端类**耦合度高，对象的创建和使用无法分离**



如果用简单工厂模式，那就可以解决这一问题。

简单工厂模式的核心是工厂类，在没有工厂类之前，客户端一般会使用new关键字来直接创建图表对象，而在引入工厂类之后，客户端可以直接通过工厂类来创建对象。工厂类提供了一个静态方法供客户端使用，根据所传入的参数不同可以创建不同的图表对象。

这里我们先写一个Chart接口将图表抽象

```java
interface Chart{
    public void display();
}
//柱状图
class HistogramChart implements Chart{
    //实现display
}
class PieChart implements Chart{
    //实现display
}
class LineChart implements Chart{
    //实现display
}

//创建工厂类
class ChartFactory{
    //静态方法
    public static Chart getChart(String type){
        Chart chart = null;
        if (type.equalsIgnoreCase("histogram")){
            chart = new HistogramChart();
        } else if (type.equalsIgnoreCase("PieChart"){
            chart = new PieChart();
        } else if type.equalsIgnoreCase("LineChart"){
            chart = new LineChart();
        }
        return chart;
    }
}

```



这样在客户端要获取代码的时候就可以不用new了，耦合度就降低了

```java
class Main{
    public static void main(String []args){
         Chart chart = ChartFactory.getChart("histogram");   
         chart.display();    
    }
}
```

*用xml文件，可以实现ChartFactory.getChart("config.xml"),如果需要更换图表，甚至客户端代码都不需要改，符合"开放封闭原则"



总结：

> 简单工厂模式提供了专门的工厂类用于创建对象，将对象的创建与使用分离开。
> 
> 主要优点：
> 
> 1. 客户端可以免除直接创建产品对象的职责，而仅仅“消费”产品，简单工厂模式实现了对象创建和使用的分离
> 
> 2. 引入配置文件，可以不修改客户端代码的情况下更换或增加新的产品类。
> 
> 缺点：
> 
> 1. 工厂类的职责过重，一旦停止工作，整个系统收到影响
> 
> 2. 系统扩展困难，一旦添加新的产品类，那工厂的逻辑就得再次修改
> 
> 3. 简单工厂模式由于使用了静态工厂方法，造成工厂角色无法形成基于继承的等级结构。




